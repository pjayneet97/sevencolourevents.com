function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"4ro/":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("fXoL"),i=n("ofXK"),c=n("TEn/");function r(e,t){if(1&e&&o.Qb(0,"ion-icon",5),2&e){var n=o.hc();o.pc("name",n.icon)}}function a(e,t){if(1&e&&o.Qb(0,"img",6),2&e){var n=o.hc();o.pc("src",n.image,o.Bc)("width",n.imageWidth)}}var s=function(){var e=function e(){_classCallCheck(this,e),this.text="",this.icon="alert",this.image="",this.imageWidth=""};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["empty-view"]],inputs:{text:"text",icon:"icon",image:"image",imageWidth:"imageWidth"},decls:6,vars:3,consts:[[1,"container"],[3,"name",4,"ngIf"],[3,"src","width",4,"ngIf"],["color","medium"],[1,"bold"],[3,"name"],[3,"src","width"]],template:function(e,t){1&e&&(o.Vb(0,"div",0),o.Fc(1,r,1,1,"ion-icon",1),o.Fc(2,a,1,2,"img",2),o.Vb(3,"ion-text",3),o.Vb(4,"p",4),o.Hc(5),o.Ub(),o.Ub(),o.Ub()),2&e&&(o.Cb(1),o.pc("ngIf",!t.image),o.Cb(1),o.pc("ngIf",t.image),o.Cb(3),o.Ic(t.text))},directives:[i.l,c.S,c.r],styles:["[_nghost-%COMP%]{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;text-align:center;height:100%}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:64px}"]}),e}()},CP0t:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("d2mR"),i=n("3Pt+"),c=n("fXoL"),r=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=c.Nb({type:e}),e.\u0275inj=c.Mb({factory:function(t){return new(t||e)},imports:[[o.a,i.f,i.l]]}),e}()},"X0/9":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n("v0iw"),i=n("fXoL"),c=function(){var e=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,"CustomerAddress"))}return _inherits(t,e),_createClass(t,[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(new t).save(e)}},{key:"load",value:function(){var e=new o.Query(t);return e.include(["zone","subzone"]),e.equalTo("customer",o.User.current()),e.descending("createdAt"),e.find()}},{key:"toString",value:function(){return"".concat(this.address,", ").concat(this.city,", ").concat(this.subzone.name,", ").concat(this.zipcode,", ").concat(this.zone.name)}},{key:"address",get:function(){return this.get("address")},set:function(e){this.set("address",e)}},{key:"zone",get:function(){return this.get("zone")},set:function(e){this.set("zone",e)}},{key:"subzone",get:function(){return this.get("subzone")},set:function(e){this.set("subzone",e)}},{key:"city",get:function(){return this.get("city")},set:function(e){this.set("city",e)}},{key:"zipcode",get:function(){return this.get("zipcode")},set:function(e){this.set("zipcode",e)}},{key:"name",get:function(){return this.get("name")},set:function(e){this.set("name",e)}},{key:"phone",get:function(){return this.get("phone")},set:function(e){this.set("phone",e)}},{key:"location",get:function(){return this.get("location")},set:function(e){this.set("location",e)}}]),t}(o.Object);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();o.Object.registerSubclass("CustomerAddress",c)},s5X5:function(e,t,n){"use strict";var o,i=n("mrSG"),c=n("3Pt+"),r=n("NV1z"),a=n("X0/9"),s=n("v0iw"),l=n("fXoL"),u=((o=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,"Zone"))}return _inherits(t,e),_createClass(t,[{key:"load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new s.Query(t);return e.type&&n.equalTo("type",e.type),e.parent&&n.equalTo("parent",e.parent),n.ascending("sort"),n.equalTo("isActive",!0),n.doesNotExist("deletedAt"),n.find()}},{key:"toString",value:function(){return this.name}},{key:"name",get:function(){return this.get("name")}},{key:"fee",get:function(){return this.get("fee")}}]),t}(s.Object)).\u0275fac=function(e){return new(e||o)},o.\u0275prov=l.Lb({token:o,factory:o.\u0275fac,providedIn:"root"}),o);s.Object.registerSubclass("Zone",u);var b,f=n("TEn/"),p=n("eIep"),d=n("lJxs"),h=n("LRne"),m=n("Bfh1"),g=n("AytR"),v=["map"],y=((b=function(){function e(t,n){_classCallCheck(this,e),this.modalCtrl=t,this.renderer=n,this.center={lat:-34.397,lng:150.644},this.selectable=!0,this.closeButtonText="Cancel",this.title="Pick Location"}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){var e=this;this.getGoogleMaps().then((function(t){e.googleMaps=t;var n=e.mapElementRef.nativeElement,o=new t.Map(n,{center:e.center,zoom:16});e.googleMaps.event.addListenerOnce(o,"idle",(function(){e.renderer.addClass(n,"visible")})),e.selectable?e.clickListener=o.addListener("click",(function(t){var n={lat:t.latLng.lat(),lng:t.latLng.lng()};e.modalCtrl.dismiss(n)})):new t.Marker({position:e.center,map:o,title:"Picked Location"}).setMap(o)})).catch((function(e){console.log(e)}))}},{key:"onCancel",value:function(){this.modalCtrl.dismiss()}},{key:"ngOnDestroy",value:function(){this.clickListener&&this.googleMaps.event.removeListener(this.clickListener)}},{key:"getGoogleMaps",value:function(){var e=window,t=e.google;return t&&t.maps?Promise.resolve(t.maps):new Promise((function(t,n){var o=document.createElement("script");o.src="https://maps.googleapis.com/maps/api/js?key="+g.a.googleMapsAPIKey,o.async=!0,o.defer=!0,document.body.appendChild(o),o.onload=function(){var o=e.google;o&&o.maps?t(o.maps):n("Google maps SDK not available.")}}))}}]),e}()).\u0275fac=function(e){return new(e||b)(l.Pb(f.cb),l.Pb(l.E))},b.\u0275cmp=l.Jb({type:b,selectors:[["app-map-modal"]],viewQuery:function(e,t){var n;1&e&&l.Nc(v,!0),2&e&&l.wc(n=l.ec())&&(t.mapElementRef=n.first)},inputs:{center:"center",selectable:"selectable",closeButtonText:"closeButtonText",title:"title"},decls:10,vars:2,consts:[["slot","primary"],[3,"click"],[1,"map"],["map",""]],template:function(e,t){1&e&&(l.Vb(0,"ion-header"),l.Vb(1,"ion-toolbar"),l.Vb(2,"ion-title"),l.Hc(3),l.Ub(),l.Vb(4,"ion-buttons",0),l.Vb(5,"ion-button",1),l.dc("click",(function(){return t.onCancel()})),l.Hc(6),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Vb(7,"ion-content"),l.Qb(8,"div",2,3),l.Ub()),2&e&&(l.Cb(3),l.Ic(t.title),l.Cb(3),l.Ic(t.closeButtonText))},directives:[f.q,f.X,f.V,f.k,f.j,f.n],styles:[".map[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;background-color:transparent;opacity:0;-webkit-transition:opacity .15s ease-in;transition:opacity .15s ease-in}.map.visible[_ngcontent-%COMP%]{opacity:1}"]}),b),k=n("tk/3"),C=n("ofXK");function w(e,t){1&e&&l.Qb(0,"ion-spinner",4)}function P(e,t){if(1&e){var n=l.Wb();l.Vb(0,"ion-img",5),l.dc("click",(function(){return l.yc(n),l.hc().onPickLocation()})),l.Ub()}if(2&e){var o=l.hc();l.pc("src",o.selectedLocationImage)}}function V(e,t){if(1&e){var n=l.Wb();l.Vb(0,"ion-button",6),l.dc("click",(function(){return l.yc(n),l.hc().onPickLocation()})),l.Qb(1,"ion-icon",7),l.Vb(2,"ion-label"),l.Hc(3,"Select location"),l.Ub(),l.Ub()}}var U,O=((U=function(){function e(t,n,o,i,c){_classCallCheck(this,e),this.modalCtrl=t,this.http=n,this.actionSheetCtrl=o,this.alertCtrl=i,this.geolocation=c,this.locationPick=new l.n,this.isLoading=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onPickLocation",value:function(){var e=this;this.actionSheetCtrl.create({header:"Please Choose",buttons:[{text:"Auto-Locate",handler:function(){e.locateUser()}},{text:"Pick on Map",handler:function(){e.openMap()}},{text:"Cancel",role:"cancel"}]}).then((function(e){e.present()}))}},{key:"locateUser",value:function(){var e=this;this.isLoading=!0,this.geolocation.getCurrentPosition().then((function(t){var n={lat:t.coords.latitude,lng:t.coords.longitude};e.createPlace(n.lat,n.lng),e.isLoading=!1})).catch((function(t){e.isLoading=!1,e.showErrorAlert()}))}},{key:"showErrorAlert",value:function(){this.alertCtrl.create({header:"Could not fetch location",message:"Please use the map to pick a location!",buttons:["Okay"]}).then((function(e){return e.present()}))}},{key:"openMap",value:function(){var e=this;this.modalCtrl.create({component:y}).then((function(t){t.onDidDismiss().then((function(t){if(t.data){var n={lat:t.data.lat,lng:t.data.lng};e.createPlace(n.lat,n.lng)}})),t.present()}))}},{key:"createPlace",value:function(e,t){var n=this,o={lat:e,lng:t,address:null,staticMapImageUrl:null};this.isLoading=!0,this.getAddress(e,t).pipe(Object(p.a)((function(e){return o.address=e,Object(h.a)(n.getMapImage(o.lat,o.lng,14))}))).subscribe((function(e){o.staticMapImageUrl=e,n.selectedLocationImage=e,n.isLoading=!1,n.locationPick.emit(o)}))}},{key:"getAddress",value:function(e,t){return this.http.get("https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(e,",").concat(t,"&key=").concat(g.a.googleMapsAPIKey)).pipe(Object(d.a)((function(e){return e&&e.results&&0!==e.results.length?e.results[0].formatted_address:null})))}},{key:"getMapImage",value:function(e,t,n){return"https://maps.googleapis.com/maps/api/staticmap?center=".concat(e,",").concat(t,"&zoom=").concat(n,"&size=500x300&maptype=roadmap\n    &markers=color:red%7Clabel:Place%7C").concat(e,",").concat(t,"\n    &key=").concat(g.a.googleMapsAPIKey)}}]),e}()).\u0275fac=function(e){return new(e||U)(l.Pb(f.cb),l.Pb(k.b),l.Pb(f.a),l.Pb(f.b),l.Pb(m.a))},U.\u0275cmp=l.Jb({type:U,selectors:[["app-location-picker"]],outputs:{locationPick:"locationPick"},decls:4,vars:3,consts:[[1,"picker"],["color","danger",4,"ngIf"],["role","button","class","location-image",3,"src","click",4,"ngIf"],["size","medium","shape","undefined","color","undefined","fill","clear","class","my-auto text-uppercase shadow-sm mr-2 ion-button",3,"click",4,"ngIf"],["color","danger"],["role","button",1,"location-image",3,"src","click"],["size","medium","shape","undefined","color","undefined","fill","clear",1,"my-auto","text-uppercase","shadow-sm","mr-2","ion-button",3,"click"],["name","location-outline","slot","start"]],template:function(e,t){1&e&&(l.Vb(0,"div",0),l.Fc(1,w,1,0,"ion-spinner",1),l.Fc(2,P,1,1,"ion-img",2),l.Fc(3,V,4,0,"ion-button",3),l.Ub()),2&e&&(l.Cb(1),l.pc("ngIf",t.isLoading),l.Cb(1),l.pc("ngIf",t.selectedLocationImage&&!t.isLoading),l.Cb(1),l.pc("ngIf",!t.selectedLocationImage&&!t.isLoading))},directives:[C.l,f.O,f.s,f.j,f.r,f.y],styles:[".picker[_ngcontent-%COMP%]{width:30rem;max-width:80%;height:10rem;max-height:50vh;display:-webkit-box;display:flex;-webkit-box-pack:left;justify-content:left;-webkit-box-align:left;align-items:left}.location-image[_ngcontent-%COMP%]{width:100%;height:100%;-o-object-fit:cover;object-fit:cover}"]}),U),_=n("sYmb");function I(e,t){if(1&e&&(l.Vb(0,"ion-select-option",25),l.Hc(1),l.Ub()),2&e){var n=t.$implicit;l.pc("value",n),l.Cb(1),l.Jc(" ",n.name," ")}}function x(e,t){if(1&e&&(l.Vb(0,"ion-select-option",25),l.Hc(1),l.Ub()),2&e){var n=t.$implicit;l.pc("value",n),l.Cb(1),l.Jc(" ",n.name," ")}}n.d(t,"a",(function(){return j}));var z,j=((z=function(e){function t(e,n,o){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).zoneService=n,i.customerAddressService=o,i.zones=[],i.subzones=[],i}return _inherits(t,e),_createClass(t,[{key:"ngOnInit",value:function(){this.setupForm()}},{key:"enableMenuSwipe",value:function(){return!1}},{key:"ionViewDidEnter",value:function(){this.loadZones()}},{key:"setupForm",value:function(){this.form=new c.d({zone:new c.b(null,c.m.required),subzone:new c.b(null,c.m.required),city:new c.b("",c.m.required),zipcode:new c.b("",c.m.required),address:new c.b("",c.m.required),name:new c.b("",c.m.required),phone:new c.b("",c.m.required),location:new c.b(null)})}},{key:"onDismiss",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.modalCtrl.dismiss(e)}},{key:"loadZones",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.zoneService.load({type:"Parent"});case 3:this.zones=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn(e.t0.message);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})))}},{key:"onZoneChanged",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.form.controls.subzone.setValue(null),e.next=4,this.zoneService.load({parent:this.form.value.zone});case 4:this.subzones=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn(e.t0.message);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})))}},{key:"onSubmit",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.form.invalid){e.next=2;break}return e.abrupt("return",this.translate.get("INVALID_FORM").subscribe((function(e){return o.showToast(e)})));case 2:return e.prev=2,e.next=5,this.showLoadingView({showOverlay:!1});case 5:return t=Object.assign({},this.form.value),e.next=8,this.customerAddressService.create(t);case 8:n=e.sent,this.showContentView(),this.onDismiss(n),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),this.showContentView(),this.translate.get("ERROR_NETWORK").subscribe((function(e){return o.showToast(e)}));case 15:case"end":return e.stop()}}),e,this,[[2,12]])})))}},{key:"onLocationPick",value:function(e){console.log(e),this.form.patchValue({location:e}),this.form.patchValue({address:e.address})}}]),t}(r.a)).\u0275fac=function(e){return new(e||z)(l.Pb(l.r),l.Pb(u),l.Pb(a.a))},z.\u0275cmp=l.Jb({type:z,selectors:[["page-address-add"]],features:[l.zb],decls:72,vars:36,consts:[[1,"ion-no-border","border-bottom"],["slot","start"],["fill","clear",3,"click"],["name","close"],[1,"ion-padding"],["color","dark"],[1,"bold","ion-no-margin"],[1,"line"],["novalidate","",3,"formGroup","ngSubmit"],["form1","ngForm"],["lines","none"],["position","stacked","color","medium"],[1,"bold"],[3,"locationPick"],["lines","none","color","light",1,"ion-margin-vertical"],["formControlName","zone",3,"ionChange"],["color","danger",3,"value",4,"ngFor","ngForOf"],["formControlName","subzone"],["type","text","formControlName","city"],["type","number","formControlName","zipcode"],["rows","4","formControlName","address"],["type","text","formControlName","name"],["type","number","formControlName","phone"],[1,"ion-text-center"],["type","submit","size","medium","shape","undefined","color","undefined","fill","clear","expand","block",1,"my-auto","text-uppercase","shadow-sm","mr-2","ion-button"],["color","danger",3,"value"]],template:function(e,t){1&e&&(l.Vb(0,"ion-header",0),l.Vb(1,"ion-toolbar"),l.Vb(2,"ion-buttons",1),l.Vb(3,"ion-button",2),l.dc("click",(function(){return t.onDismiss()})),l.Qb(4,"ion-icon",3),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Vb(5,"ion-content",4),l.Vb(6,"ion-text",5),l.Vb(7,"h4",6),l.Hc(8),l.ic(9,"translate"),l.Ub(),l.Qb(10,"div",7),l.Ub(),l.Vb(11,"form",8,9),l.dc("ngSubmit",(function(){return t.onSubmit()})),l.Vb(13,"ion-list",10),l.Vb(14,"ion-label",11),l.Vb(15,"span",12),l.Hc(16,"Select Location"),l.Ub(),l.Ub(),l.Vb(17,"app-location-picker",13),l.dc("locationPick",(function(e){return t.onLocationPick(e)})),l.Ub(),l.Vb(18,"ion-label",11),l.Vb(19,"span",12),l.Hc(20),l.ic(21,"translate"),l.Ub(),l.Ub(),l.Vb(22,"ion-item",14),l.Vb(23,"ion-label"),l.Hc(24),l.ic(25,"translate"),l.Ub(),l.Vb(26,"ion-select",15),l.dc("ionChange",(function(){return t.onZoneChanged()})),l.Fc(27,I,2,2,"ion-select-option",16),l.Ub(),l.Ub(),l.Vb(28,"ion-label",11),l.Vb(29,"span",12),l.Hc(30),l.ic(31,"translate"),l.Ub(),l.Ub(),l.Vb(32,"ion-item",14),l.Vb(33,"ion-label"),l.Hc(34),l.ic(35,"translate"),l.Ub(),l.Vb(36,"ion-select",17),l.Fc(37,x,2,2,"ion-select-option",16),l.Ub(),l.Ub(),l.Vb(38,"ion-label",11),l.Vb(39,"span",12),l.Hc(40),l.ic(41,"translate"),l.Ub(),l.Ub(),l.Vb(42,"ion-item",14),l.Qb(43,"ion-input",18),l.Ub(),l.Vb(44,"ion-label",11),l.Vb(45,"span",12),l.Hc(46),l.ic(47,"translate"),l.Ub(),l.Ub(),l.Vb(48,"ion-item",14),l.Qb(49,"ion-input",19),l.Ub(),l.Vb(50,"ion-label",11),l.Vb(51,"span",12),l.Hc(52),l.ic(53,"translate"),l.Ub(),l.Ub(),l.Vb(54,"ion-item",14),l.Qb(55,"ion-textarea",20),l.Ub(),l.Vb(56,"ion-label",11),l.Vb(57,"span",12),l.Hc(58),l.ic(59,"translate"),l.Ub(),l.Ub(),l.Vb(60,"ion-item",14),l.Qb(61,"ion-input",21),l.Ub(),l.Vb(62,"ion-label",11),l.Vb(63,"span",12),l.Hc(64),l.ic(65,"translate"),l.Ub(),l.Ub(),l.Vb(66,"ion-item",14),l.Qb(67,"ion-input",22),l.Ub(),l.Vb(68,"div",23),l.Vb(69,"ion-button",24),l.Hc(70),l.ic(71,"translate"),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Ub()),2&e&&(l.Cb(8),l.Jc(" ",l.jc(9,14,"SHIPPING_INFO")," "),l.Cb(3),l.pc("formGroup",t.form),l.Cb(9),l.Ic(l.jc(21,16,"ZONE")),l.Cb(4),l.Ic(l.jc(25,18,"ZONE")),l.Cb(3),l.pc("ngForOf",t.zones),l.Cb(3),l.Ic(l.jc(31,20,"SUBZONE")),l.Cb(4),l.Ic(l.jc(35,22,"SUBZONE")),l.Cb(3),l.pc("ngForOf",t.subzones),l.Cb(3),l.Ic(l.jc(41,24,"CITY")),l.Cb(6),l.Ic(l.jc(47,26,"ZIPCODE")),l.Cb(6),l.Ic(l.jc(53,28,"SHIPPING_ADDRESS")),l.Cb(6),l.Ic(l.jc(59,30,"CONTACT_NAME")),l.Cb(6),l.Ic(l.jc(65,32,"CONTACT_PHONE")),l.Cb(6),l.Jc(" ",l.jc(71,34,"SAVE")," "))},directives:[f.q,f.X,f.k,f.j,f.r,f.n,f.S,c.n,c.j,c.e,f.z,f.y,O,f.w,f.K,f.ib,c.i,c.c,C.k,f.v,f.jb,f.eb,f.T,f.L],pipes:[_.c],styles:[""]}),z)}}]);